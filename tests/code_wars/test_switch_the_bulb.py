import unittest

from src.code_wars.switch_the_bulbs import Board, switch_bulbs

GAME_MAPS = [
    "+--------+\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|........|\n"+
    "|........|\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|........|\n"+
    "|........|\n"+
    "+--------+",

    "+--------+\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|........|\n"+
    "|.....B..|\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|........|\n"+
    "|........|\n"+
    "+--------+",

    "+--------+\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|........|\n"+
    "|........|\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|........|\n"+
    "|.....B..|\n"+
    "+--------+",

    "+--------+\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|.B......|\n"+
    "|........|\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|........|\n"+
    "|.B...B..|\n"+
    "+--------+",

    "+--------+\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|.B......|\n"+
    "|........|\n"+
    "|........|\n"+
    "|...BB...|\n"+
    "|........|\n"+
    "|.B...B..|\n"+
    "+--------+",

    "+--------+\n"+
    "|........|\n"+
    "|.B......|\n"+
    "|.B..B...|\n"+
    "|........|\n"+
    "|........|\n"+
    "|.B..B...|\n"+
    "|.B......|\n"+
    "|........|\n"+
    "+--------+"
]
GAME_SOLUTIONS = [                      # Solutions for the first basic tests. You can remove them once you're done...
    [(1,3),(5,3)],
    [(1,3),(3,5),(5,3)],
    [(1,3),(5,3),(7,5)],
    [(1,3),(5,3),(7,5),(7,1),(2,1)],
    [(1,3),(5,3),(7,5),(7,1),(2,1),(5,4)],
]

GAME_MAPS_2 = [
    "+--------+\n"+
    "|...B....|\n"+
    "|........|\n"+
    "|.B......|\n"+
    "|......B.|\n"+
    "|......B.|\n"+
    "|.B......|\n"+
    "|......BB|\n"+
    "|BB......|\n"+
    "+--------+",

    "+--------+\n"+
    "|...BB...|\n"+
    "|........|\n"+
    "|..B..B..|\n"+
    "|....B...|\n"+
    "|....B...|\n"+
    "|..B.....|\n"+
    "|.B....B.|\n"+
    "|........|\n"+
    "+--------+",

    "+--------+\n"+
    "|........|\n"+
    "|.B.B..B.|\n"+
    "|........|\n"+
    "|.B..B.B.|\n"+
    "|........|\n"+
    "|.B.B..B.|\n"+
    "|........|\n"+
    "+--------+",

    "+----------+\n"+
    "|..........|\n"+
    "|..........|\n"+
    "|..........|\n"+
    "|..B.B....B|\n"+
    "|.B...B...B|\n"+
    "|.....B....|\n"+
    "|..........|\n"+
    "|.B......B.|\n"+
    "|....B.....|\n"+
    "|.B..BB..B.|\n"+
    "+----------+",

    "+--------+\n"+
    "|........|\n"+
    "|.BBBBBB.|\n"+
    "|.BBBBBB.|\n"+
    "|.BBBBBB.|\n"+
    "|.BBBBBB.|\n"+
    "|.BBBBBB.|\n"+
    "|.BBBBBB.|\n"+
    "|........|\n"+
    "+--------+",

    "+---------+\n"+
    "|.........|\n"+
    "|.B.B.B.B.|\n"+
    "|..B.B.B..|\n"+
    "|.B.B.B.B.|\n"+
    "|..B.B.B..|\n"+
    "|.B.B.B.B.|\n"+
    "|..B.B.B..|\n"+
    "|.B.B.B.B.|\n"+
    "|.........|\n"+
    "+---------+",

    "+---------+\n"+
    "|.B......B|\n"+
    "|.B.......|\n"+
    "|......B..|\n"+
    "|.........|\n"+
    "|....B....|\n"+
    "|.....B...|\n"+
    "|.........|\n"+
    "|.......B.|\n"+
    "|.........|\n"+
    "+---------+",

    "+---------+\n"+
    "|.........|\n"+
    "|...BBB...|\n"+
    "|..B...B..|\n"+
    "|......B..|\n"+
    "|.....B...|\n"+
    "|....B....|\n"+
    "|....B....|\n"+
    "|.........|\n"+
    "|....B....|\n"+
    "|.........|\n"+
    "+---------+",

    "+----------------+\n"+
    "|B.............B.|\n"+
    "|.B..........B...|\n"+
    "|................|\n"+
    "|..B........B....|\n"+
    "|....B.....B.....|\n"+
    "|.....B..B.......|\n"+
    "|.......B........|\n"+
    "|......B.........|\n"+
    "|......B.B.......|\n"+
    "|.....B....B.....|\n"+
    "|................|\n"+
    "|....B......B....|\n"+
    "|..B.........B...|\n"+
    "|.B............B.|\n"+
    "|................|\n"+
    "|B..............B|\n"+
    "+----------------+",

    "+--------+\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|........|\n"+
    "|..B.....|\n"+
    "|........|\n"+
    "|...B....|\n"+
    "|........|\n"+
    "|........|\n"+
    "+--------+",      # no solution

    "+------------------+\n"+
    "|.B...B...B........|\n"+
    "|B.................|\n"+
    "|.....B.B.....B....|\n"+
    "|..............B...|\n"+
    "|..................|\n"+
    "|..............B...|\n"+
    "|.B.......B........|\n"+
    "|..................|\n"+
    "|..................|\n"+
    "|..................|\n"+
    "|.......B.B........|\n"+
    "|..................|\n"+
    "|..................|\n"+
    "|..................|\n"+
    "|..................|\n"+
    "|..B........B......|\n"+
    "|...............B..|\n"+
    "|..................|\n"+
    "|..................|\n"+
    "|..............B...|\n"+
    "|..................|\n"+
    "|..........B.......|\n"+
    "+------------------+",

    "+------------------------+\n"+
    "|.....................B..|\n"+
    "|........................|\n"+
    "|............B...........|\n"+
    "|........................|\n"+
    "|........................|\n"+
    "|......B....B.........B..|\n"+
    "|........................|\n"+
    "|...................B....|\n"+
    "|........................|\n"+
    "|........................|\n"+
    "|........B..B............|\n"+
    "|........................|\n"+
    "|........................|\n"+
    "|........B...............|\n"+
    "|B.......................|\n"+
    "|.B......................|\n"+
    "|.............BB....B....|\n"+
    "|............B.....B.....|\n"+
    "|.................B......|\n"+
    "|........................|\n"+
    "|........................|\n"+
    "|........................|\n"+
    "|........................|\n"+
    "|............B...........|\n"+
    "|........................|\n"+
    "|........................|\n"+
    "|........................|\n"+
    "|........................|\n"+
    "+------------------------+"
]


class TestSwitchTheBulb(unittest.TestCase):
    def test_a(self):
        for i in range(GAME_MAPS):
            game_map, expected = GAME_MAPS[i], GAME_SOLUTIONS[i]
            with self.subTest(f"{game_map} --> {expected}"):
                actual = switch_bulbs(game_map)
                self.assertEqual(actual, expected)

    def test__init__(self):
        board = Board(GAME_MAPS[0])
        self.assertEqual(board.bulbs, set([(1,3),(5,3)]))
        self.assertEqual(board.graph, [])


if __name__ == "__main__":
    runner = unittest.TextTestRunner(verbosity=2)
    unittest.main(testRunner=runner)
